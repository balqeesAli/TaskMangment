<!doctype html>
<html>
   <head>
      <meta charset="utf-8">
      <title>Task Management Web Application</title>
      <link rel="icon" href="image/icon.png" />
      <link rel="stylesheet" href="css/stylesheet.css">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <style>
         
      </style>
   </head>
   <body>
      <header>
         <div clss= "row">
            <div class = "col">
               <img class="style-logo" src="image/icon.png">
               <nav class="style-nav">
                  <ul>
                     <li><a href = "index.html">Home</a></li>
                     <li><a href = "registration.html">Registration</a> </li>
                  </ul>
               </nav>
            </div>
         </div>
      </header>
      <main>
         <div clss= "row">
            <div class="col">
               <div class="home">
                  <h1>Login</h1>
               </div>
            </div>
         </div>
      </main>
      <div class="container">
         <form id="login-form">
            <div class="row">
               <div class="col-25">
                  <label for="email">Email</label>
               </div>
               <div class="col-75">
                  <input type="email" id="email" name="email" placeholder="Your email ..">
               </div>
            </div>
            <div class="row">
               <div class="col-25">
                  <label for="password">Password</label>
               </div>
               <div class="col-75">
                  <input type="password" id="password" name="password" placeholder="Your password ..">
               </div>
            </div>
            <div class="row">
               <input type="submit" value="Login">
            </div>
         </form>
      </div>
      <footer>
         <div class="row">
            <div class="col">
               <br><br><br><br><br><br><br><br>
               <p class="footer-text">
               <center>@2024 Task Management Web Application. All rights reserved.</center>
               </p>	
            </div>
         </div>
      </footer>
   </body>
</html> 
<body></body>
</html>
<script> 
   document
     .getElementById("login-form")
     .addEventListener("submit", function (event) {
       event.preventDefault();
       
       const email = document.getElementById("email").value;
       const password = document.getElementById("password").value;
 
       const loginData = {
         email: email,
         hashPassword: password,
       };
 
       fetch("https://localhost:7226/api/Auth/login", {
         method: "POST",
         headers: {
           "Content-Type": "application/json",
         },
         body: JSON.stringify(loginData),
       })
         .then((response) => {
           if (!response.ok) {
             throw new Error("Login failed");
           } 
           window.location.href = "task.html";
         })
         .catch((error) => {
           console.error("Login error:", error); 
           alert("Login failed. Please try again.");
         });
     });
 </script>